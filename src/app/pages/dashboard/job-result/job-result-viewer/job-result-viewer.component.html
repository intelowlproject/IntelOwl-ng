<!-- Here be dragons. DO NOT TOUCH. -->
<!-- Template used to recurse over job's JSON report for nested list view -->
<ng-template *ngTemplateOutlet="ResultListRef; context: { dataObj: data }">
</ng-template>

<ng-template #ResultListRef let-obj="dataObj">
  <nb-list>
    <nb-list-item
      *ngFor="let item of obj | keyvalue"
      [ngSwitch]="getObjectType(item?.value)"
    >
      <!-- Case#1: It's a string and can be directly rendered -->
      <span
        class="d-flex justify-content-between w-100"
        *ngSwitchCase="'string'"
      >
        <strong style="font-size: smaller;">{{ item?.key }}</strong>
        <div class="ml-4 text-json">{{ item?.value }}</div>
      </span>
      <!-- Case#2: It's an object so recursive call -->
      <details
        class="nested-collapsible-row"
        [open]="expanded"
        *ngSwitchCase="'object'"
      >
        <summary
          ><strong style="font-size: smaller;">{{ item?.key }}</strong></summary
        >
        <nb-card class="m-2">
          <nb-card-body>
            <ng-template
              *ngTemplateOutlet="
                ResultListRef;
                context: { dataObj: item?.value }
              "
            >
            </ng-template>
          </nb-card-body>
        </nb-card>
      </details>
    </nb-list-item>
  </nb-list>
</ng-template>
<!--/Template -->
